
# 使用したコマンドまとめ

本研修内で使用したgit操作におけるコマンドについて、下記に要約する。
以下の説明は簡易に意味をまとめたものであり、子細な動作は各自確認されたい。

また、それぞれのチケットごとにまとめるが、寄り道した関係上次のチケットの内容を先取りする形で入力している場合があることに理解されたい。

<details><summary>#1432 ローカルリポジトリ作成</summary>

# \#1432 ローカルリポジトリ作成
## git init

ローカルリポジトリを作成する際に入力するコマンド。現在のディレクトリに.gitという隠しフォルダが作成される。
`git init <ディレクトリ>`と指定することで、指定したディレクトリに作成することも可能。

```
git init <ディレクトリ（省略可）>
```

## git add

ワーキングツリーに存在するファイルをインデックスに登録するコマンド。
よく使いオプションに下表があるが、グループで開発している場合は
ファイル指定`git add <ファイル名>`で登録するのが無難。

|            | 意味           | 新規作成のファイル | 変更されたファイル | 削除されたファイル   |   Addの範囲        | 
| :--------: | :------------: | :----------------: | :----------------: | :------------------: | :----------------: | 
| git add -u | updateの頭文字 | ×                 | ○                 | ○                   | リポジトリ全体     | 
| git add .  | ？             | ○                 | ○                 | ○                   | 現在のディレクトリ | 
| git add -A | Allの頭文字    | ○                 | ○                 | ○                   | リポジトリ全体     | 

```
git add <ファイル名>
```

## git stash

スタッシュに変更したファイルを一時退避/戻すコマンド。それぞれ、`git stash push(/save)`や`git stash pop`とする。
mainで作業に係る部分に変更があった場合に同期するために利用する（ことが多いと思われる）。
`git stash list`とすることでスタッシュ一覧を確認できる。また、`git stash push -m "コメント"`とすることでコメント付きで退避も可能のため、極力コメントは残す。
`git stash clear`でスタッシュの全削除なども可能。

**保存コマンド**
```
git stash push -m "hoge"
git stash save "fuga"
```
**適用（戻す）コマンド**
```
git stash pop
git stash pop stash@{N}  #N番目のスタッシュを適用
```

## git pull

mainから変更を拾って現在のブランチに適用させる。`git fetch`と`git merge`を動かすのとほぼ同義であり、
それぞれmainから情報を拾う、現在のブランチに適用のコマンド。

```
git pull original main
```
</details>

<details><summary>#1433 コミット</summary>

# \#1433 コミット

## git status

ステージングされているファイルの確認。defaultは`--long`オプションが適用された状態での出力。
ステージングされている内容と現在のブランチに差異がある場合検出可能。

```
git status
```

## git commit

ステージングされているファイルをローカルリポジトリに変更の記録を行う。**必ず**`-m`オプションを利用し、
コメントを入力すること。コメントは一文で簡潔に行うこと。

```
git commit -m "comment"
```

## git log

コミットの履歴を新しい順に表示するコマンド。自分の環境ではqを押さないとログが出まくった。
オプション`--oneline`を利用することで、コミットハッシュの確認が可能。過去の状態に戻したいときに利用するとよい。

```
git log
```
</details>

<details><summary>#1434 ファイルを元に戻す</summary>

  # \#1434 ファイルを元に戻す

`git status`と`git log`に追記した。
今回行ったのは、ローカルとローカルリポジトリでのファイル削除および復活。
認識が間違っていたら再度行う。

## git checkout <ファイル名>

コミットからローカルに復元するコマンド。ローカルブランチの内容を参照してこれを復元する。
後述するが、`git checkout`自体はブランチの切り替えの際に利用するコマンドであり、混同しないよう注意。

```
git checkout <ファイル名>
```
## git restore

ワークツリーファイルの復元を行う。地点の指定としてファイルパスや単にファイル名を入力することで復元できる。
`-s`オプションではコミットハッシュ（コミットIDとの記載もあり）まで状態を戻すことが可能。
コミットハッシュの取得は`git log`参照。

```
git restore -s "commit hash"
```
---
せっかくなのでここでGitHubリモートリポジトリへpushしてみた。
`main.c`が削除されたままになっていたためこれに対応した。
その際に利用したコマンドを以下に記載する。

~~ただのスペルミスで失敗してたのはここだけの話。~~

## git push

ローカルリポジトリからリモートリポジトリへの登録を行うコマンド。
`git push`後にエイリアス、リポジトリを指定するが、エイリアスを設定していない場合はoriginでいいと思われる。

```
git push <エイリアス> <リポジトリ>
```

## git remote

リモートリポジトリの一覧を取得する。`-v`でURLも取得可能で、このオプションはよく使いそう。
```
git remote -v
```
---

</details>

<details><summary>#1435 ブランチ</summary>

# \#1435 ブランチ

## git branch

ブランチを作成するためのコマンド。単に`git branch`とすると現在のリポジトリ内のブランチを確認可能。
また、リポジトリ内のどのブランチにいるかは*によって示されている（自分の環境ではさらに緑色に強調表示されていた）。

`git branch <branch名>`とすることでブランチの作成も可能。

```
git branch <ブランチ名>
git branch -d <ブランチ名>  #ブランチの削除
```

## git checkout <ブランチ名>

ブランチの移動に用いるコマンド。`git switch`でも同様の操作が可能。前述の`git checkout`と混同しないためにも`git switch`を用いる方が適切か。

```
git checkout <ブランチ名>
git switch <ブランチ名>
```
また、以下のようにするとブランチ名の変更も可能。`<現在のブランチ名>`は、今いるブランチの場合に省略可能。

```
git branch -m <現在のブランチ名> <新しいブランチ名>
```

## git ls-tree

指定ブランチに保存されているファイルを知るコマンド。他のブランチを`git switch`せずに確認できるコマンドだが、
現在のブランチの中身を知るにはもっといいコマンドがありそう。

今までcmdの`dir`コマンドで確認していたのでここで記載。前後してごめんね。

```
git ls-tree <ブランチ名>
```
</details>

<details><summary>#1436 マージ</summary>

# \#1436 マージ

## git merge

**現在のブランチ**に`<ブランチ名>`を統合するコマンド。

```
git merge <ブランチ名>
```

</details>

<details><summary>#1437 コンフリクト</summary>

# \#1437 コンフリクト

いわゆるかち合った状態の練習。featureとmainのブランチでそれぞれmain.cに書き込み、わざとコンフリクトを起こさせる。

（参考）コンフリクトが起こった時のログ
```
Auto-merging main.c
CONFLICT (content): Merge conflict in main.c
Automatic merge failed; fix conflicts and then commit the result.
```

コメント）今回新規でコンフリクト解消後、手動でfeatureブランチを削除したがこれで正しい手順なのか。
また、今回新たに使用したコマンドはなし。

</details>

<details><summary>#1438 ブランチ/ #1439 クローン</summary>

# \#1438 フォーク/ \#1439 クローン

クローンとフォークは異なる作業である。大きな違いとしては以下。詳細はご自分で。

- クローンはローカルにコピーする作業であり、親リポジトリの変更は反映されない
- フォークは親リポジトリの所有者に通知される

## git clone

リポジトリを新たなディレクトリに複製するコマンド。

```
git clone <URL>
```

## git remote

リモートリポジトリを表示するコマンド。`-v`オプションで、URLも表示できる。

```
git remote -v
```

## git remote add

リモートの追加を行うコマンド。
親リポジトリの情報が思うように得られなかったため、手動で設定した。
`<リモート名>`には`origin`か`upstream`が一般的らしい。

```
git remote add <リモート名> <リモートURL>
```

コメ）ほぼ手動で行う作業で相違ないですか？

</details>

---

<details><summary>備忘録</summary>

以下にコマンドプロンプトにて使用したコマンドを備忘録的に掲示しておく。

## mkdir

ディレクトリの作成コマンド。フォルダの作成との違いはCUI、GUIの違い程度だがほぼ同義として使われている様子。詳細はリンク参照。

[【初心者向け】CUIとGUIとは。それぞれの特長と使い分けを解説！](https://www.miraiserver.ne.jp/column/about_cui-gui/)

## dir

ファイルやディレクトリを一覧表示するためのコマンド。オプションが多くどれも有用のため、リンクを参考に適当なオプションを使用する。

[lsコマンドで一覧を表示する方法](https://qiita.com/eric50905/items/e6ef22a398de07978d2c)

## echo

コメントを出力するコマンドだが、ほとんどファイルの作成に使用した。
適切なコマンドを未知のため、`echo "hoge" > sample.txt`みたいな感じで使用。

## (ファイルを開く)

ファイルを開く際に、`"sample.txt"`のようにダブルクォーテーションで囲うことで実行。

## del

ファイルの削除。例：`del sample.txt`

## cls

ログの掃除。

</details>

